const app=getApp();Component({properties:{postInfo:{type:Object,value:null,observer(e,t,s){e&&this.setData({info:e})}},toUser:{type:Boolean,value:!1}},data:{info:{}},ready(){},methods:{linkToPost(e){const t=e.currentTarget.dataset.id;wx.navigateTo({url:`/pages/post/post?postId=${t}`})},onlinktouser(e){const t=getCurrentPages().length;if("pages/user/user"==getCurrentPages()[t-1].route)return;const s=e.currentTarget.dataset.id;wx.navigateTo({url:`/pages/user/user?oid=${s}`})},onviewimg(e){const[t,s]=[e.currentTarget.dataset.index,this.data.info.data.atlas_list],r=[];for(var a=0;a<s.length;a++)r.push(s[a].image_path);wx.previewImage({current:r[t],urls:r})},praiseAdd(e){app.request.praiseAdd({params:{uid:wx.getStorageSync("u_id"),id:e,type:1},success:e=>{1==e.result_code?this.triggerEvent("praiseConfirm"):wx.showToast({title:e.result_msg,icon:"none",mask:!0,duration:1e3})}})},cancelPraise(e){app.request.cancelPraise({params:{uid:wx.getStorageSync("u_id"),id:e,type:1},success:e=>{1==e.result_code?this.triggerEvent("praiseConfirm"):wx.showToast({title:e.result_msg,icon:"none",mask:!0,duration:1e3})}})},doLike(e){const t=e.currentTarget.dataset.item;0==t.praised?this.praiseAdd(t.feed_id):this.cancelPraise(t.feed_id)},onlinktouserFromComment(e){if(this.properties.toUser){const t=e.currentTarget.dataset.id;wx.navigateTo({url:`/pages/user/user?oid=${t}`})}}}});