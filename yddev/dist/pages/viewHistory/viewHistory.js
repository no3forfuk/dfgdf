const app=getApp(),ajax=app.request;Page({data:{feeCurrent:0,markStyle:{width:0,left:0},headerData:[{text:"本周记录"},{text:"本月记录"},{text:"以前"}],tabBarData:{show:!0,options:{current:3},items:[{label:"活动",key:"active"},{label:"圈子",key:"circle"},{label:"商城",key:"mall"},{label:"我的",key:"mine"}]},resourcesData:[]},ontabbarchange(e){const[t,a]=[e.detail.index,this.data.tabBarData];a.options.current=t,this.setData({tabBarData:a}),wx.reLaunch({url:`/pages/index/index?id=${t}`})},onpagescroll(e){const[t,a]=[e.detail,this.data.tabBarData],n=wx.getStorageSync("system");let o=t.scrollHeight-t.scrollTop-n.windowHeight;t.deltaY<0?a.show=!(o>50):a.show=!0,this.setData({tabBarData:a})},onchangefeetype(e){this.setData({feeCurrent:e.currentTarget.dataset.index}),this.setFeeMarkPosition()},setFeeMarkPosition(){const[e]=[this.data.feeCurrent],t=wx.createSelectorQuery();t.selectAll(".header-item-text").boundingClientRect(),t.exec(t=>{t[0]&&this.setData({markStyle:{width:t[0][e].width,left:t[0][e].left}})})},oncollect(){},onLoad:function(e){},onReady:function(){ajax.getHouseResouceViewHistory({params:{uid:wx.getStorageSync("u_id")},success:e=>{console.log(e)}})},onShow:function(){wx.setNavigationBarTitle({title:"浏览历史"}),this.setFeeMarkPosition()},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}});