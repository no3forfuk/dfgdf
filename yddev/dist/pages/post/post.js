const app=getApp();Page({data:{inputPaddingLeft:"",commentText:"",info:{},toUser:"",commentList:[],pid:0},oninputcomment(t){const e=t.detail.value;this.setData({commentText:e})},onsubmitcomment(){this.data.commentText.length>0&&app.request.addComment({params:{uid:wx.getStorageSync("u_id"),content:this.data.commentText,id:this.data.info.feed_id,type:1,pid:this.data.pid},success:t=>{this.setData({commentText:"",toUser:"",pid:0}),this.getCommentList()}})},c2c(t){const e=t.currentTarget.dataset.item;e.uid!=wx.getStorageSync("u_id")&&this.setData({toUser:e.nick,pid:e.id})},commentPost(){this.setData({pid:0,toUser:""})},getCommentList(){app.request.getCommentList({params:{uid:wx.getStorageSync("u_id"),id:this.options.postId},success:t=>{this.setData({commentList:t.result_data.result}),console.log(t.result_data.result)}})},getPostDetails(t){wx.getStorage({key:"u_id",success:e=>{app.request.getPostDetails({params:{feed_id:this.options.postId,uid:e.data},success:e=>{console.log(e.result_data),1==e.result_code&&t(e)}})}})},onviewimg(t){const[e,s]=[t.currentTarget.dataset.index,this.data.info.data.atlas_list],a=[];for(var i=0;i<s.length;i++)a.push(s[i].image_path);wx.previewImage({current:a[e],urls:a})},onLoad:function(t){},onReady:function(t){},onShow:function(){wx.setNavigationBarTitle({title:"帖子详情"}),this.getPostDetails(t=>{this.setData({info:t.result_data,toUser:t.result_data.nick})}),this.getCommentList()},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}});