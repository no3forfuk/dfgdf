const app=getApp(),ajax=app.request;Page({data:{homemakingType:"server",homemakingData:{},homemakingValue:"",serverData:{type:1,name:"",tip:"公寓管家将根据您的需求，为您提供专业的服务人员",placeholder:"填写详细要求",successContent:"您的需求已提交，我们会尽快派人处理",failContent:"抱歉，我们无法为您空的需求进行服务"},suggestData:{type:2,name:"",tip:"公寓管家将根据您的意见，做出合适的调整",placeholder:"详细描述您的意见",successContent:"您的意见已提交，我们会尽快改进",failContent:"抱歉，我们不太明白您需要我们改进哪里"}},onselecthomemaking(t){const a=t.currentTarget.dataset.type;this.setData({homemakingType:a}),this.setCurrentData()},setCurrentData(){let[t,a,e]=[this.data.homemakingData,this.data.homemakingType,""];e="server"==a?this.data.serverData:this.data.suggestData,Object.assign(t,e),this.setData({homemakingData:t})},onsethomemakingvalue(t){this.setData({homemakingValue:t.detail.value})},onsubmithomemaking(){let t=this.data.homemakingValue;if(0===(t=t.trim()).length)wx.showModal({content:this.data.homemakingData.failContent,showCancel:!1});else{const a="server"==this.data.homemakingType?"1":"2";ajax.submitHouseWorkType({params:{content:t,uid:wx.getStorageSync("u_id"),type_id:a},success:t=>{1==t.result_code?wx.showModal({content:this.data.homemakingData.successContent,showCancel:!1,success:t=>{wx.navigateBack({delta:1})}}):wx.showModal({content:t,showCancel:!1,success:t=>{wx.navigateBack({delta:1})}})}})}},onLoad:function(t){},onReady:function(){},onShow:function(){wx.setNavigationBarTitle({title:"家政服务"}),this.setCurrentData()},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}});